# =============================================================================
# BASE CONFIGURATION - Shared across all deployment environments
# =============================================================================
# This file contains the base configuration used by all deployment targets.
# Environment-specific files (azure/azure.env, local/local.env) override these values.

# =============================================================================
# LEGEND VERSIONS
# =============================================================================
LEGEND_ENGINE_VERSION=4.40.3
LEGEND_SDLC_VERSION=0.195.0
LEGEND_STUDIO_VERSION=13.113.0

# =============================================================================
# DEFAULT SERVICE PORTS
# =============================================================================
LEGEND_ENGINE_PORT=6300
LEGEND_ENGINE_ADMIN_PORT=6301
LEGEND_SDLC_PORT=6100
LEGEND_STUDIO_PORT=9000
MONGODB_PORT=27017

# =============================================================================
# DEFAULT SERVICE HOSTS
# =============================================================================
LEGEND_ENGINE_HOST=0.0.0.0
LEGEND_SDLC_HOST=0.0.0.0
LEGEND_STUDIO_HOST=0.0.0.0

# =============================================================================
# KUBERNETES DEFAULTS
# =============================================================================
K8S_NAMESPACE=legend
K8S_NAMESPACE_SYSTEM=legend-system
K8S_INGRESS_CLASS=nginx

# =============================================================================
# MONGODB DEFAULTS
# =============================================================================
MONGODB_HOST=mongodb
MONGODB_NAME=legend
MONGODB_USER=admin
MONGODB_PASSWORD=admin
# Default connection string for local/dev
MONGODB_URI=mongodb://admin:admin@mongodb:27017/legend?authSource=admin

# MongoDB Session Configuration
MONGODB_SESSION_ENABLED=false
MONGODB_SESSION_STORE=false
MONGODB_SESSION_COLLECTION=sessions

# =============================================================================
# GITLAB OAUTH DEFAULTS (must be overridden in secrets)
# =============================================================================
GITLAB_HOST=gitlab.com
# These MUST be overridden in secrets.env
GITLAB_APP_ID=${GITLAB_APP_ID:-your-gitlab-app-id}
GITLAB_APP_SECRET=${GITLAB_APP_SECRET:-your-gitlab-app-secret}

# =============================================================================
# DEFAULT RESOURCE LIMITS
# =============================================================================
DEFAULT_MEMORY_REQUEST=512Mi
DEFAULT_MEMORY_LIMIT=1Gi
DEFAULT_CPU_REQUEST=250m
DEFAULT_CPU_LIMIT=500m

# Engine-specific defaults
ENGINE_MEMORY_REQUEST=512Mi
ENGINE_MEMORY_LIMIT=2Gi
ENGINE_CPU_REQUEST=500m
ENGINE_CPU_LIMIT=1000m
ENGINE_REPLICAS=1

# SDLC-specific defaults
SDLC_MEMORY_REQUEST=512Mi
SDLC_MEMORY_LIMIT=1Gi
SDLC_CPU_REQUEST=250m
SDLC_CPU_LIMIT=500m
SDLC_REPLICAS=1

# Studio-specific defaults
STUDIO_MEMORY_REQUEST=256Mi
STUDIO_MEMORY_LIMIT=512Mi
STUDIO_CPU_REQUEST=100m
STUDIO_CPU_LIMIT=250m
STUDIO_REPLICAS=1

# =============================================================================
# JAVA OPTIONS
# =============================================================================
JAVA_OPTS_COMMON="-XX:+UseG1GC -XX:MaxGCPauseMillis=200"
ENGINE_JAVA_OPTS="-Xmx1500m -Xms1000m ${JAVA_OPTS_COMMON}"
SDLC_JAVA_OPTS="-Xmx750m -Xms500m ${JAVA_OPTS_COMMON}"

# =============================================================================
# LOGGING AND MONITORING DEFAULTS
# =============================================================================
NODE_ENV=production
LOG_LEVEL=INFO
ENABLE_MONITORING=false
ENABLE_TLS=false

# =============================================================================
# HEALTH CHECK PATHS
# =============================================================================
DEFAULT_HEALTH_CHECK_PATH=/health
DEFAULT_READINESS_PROBE_PATH=/health
DEFAULT_LIVENESS_PROBE_PATH=/health

ENGINE_HEALTH_CHECK_PATH=/api/server/v1/info
ENGINE_READINESS_PROBE_PATH=/api/server/v1/info
ENGINE_LIVENESS_PROBE_PATH=/api/server/v1/info

SDLC_HEALTH_CHECK_PATH=/api/info
SDLC_READINESS_PROBE_PATH=/api/info
SDLC_LIVENESS_PROBE_PATH=/api/info

STUDIO_HEALTH_CHECK_PATH=/
STUDIO_READINESS_PROBE_PATH=/
STUDIO_LIVENESS_PROBE_PATH=/

# =============================================================================
# METADATA PURE CONFIGURATION
# =============================================================================
METADATA_PURE_HOST=localhost
METADATA_PURE_PORT=6300
METADATA_PURE_PATH=/api

# =============================================================================
# EXECUTION CONFIGURATION
# =============================================================================
EXECUTION_TEMP_PATH=/tmp/legend
EXECUTION_MAX_THREADS=10

# =============================================================================
# DEFAULT DEPLOYMENT ENVIRONMENT
# =============================================================================
# This will be overridden by environment-specific configs
DEPLOYMENT_ENV=${DEPLOYMENT_ENV:-local}