{
    "applicationName": "Depot Store Manager API",
    "deployment": "DEV",
    "sessionCookie": "LEGEND_DEPOT_STORE_JSESSIONID",
    "urlPattern": "/depot-store/api/*",
    "server": {
        "type": "simple",
        "applicationContextPath": "/",
        "adminContextPath": "/admin",
        "connector": {
            "type": "http",
            "port": 6201,
            "maxRequestHeaderSize": "32KiB"
        },
        "gzip": {
            "includedMethods": ["GET", "POST"]
        },
        "requestLog": {
            "appenders": [
                {
                    "type": "console",
                    "filterFactories": [
                        {"type": "healthcheck-filter-factory"}
                    ]
                }
            ]
        }
    },
    "pac4j": {
        "callbackPrefix": "/depot-store/log.in",
        "bypassPaths": ["/depot-store/api/info"],
        "clients": [
            {
                "org.finos.legend.server.pac4j.gitlab.GitlabClient": {
                    "name": "gitlab",
                    "clientId": "${GITLAB_APP_ID}",
                    "secret": "${GITLAB_APP_SECRET}",
                    "discoveryUri": "https://${GITLAB_HOST}/.well-known/openid-configuration",
                    "scope": "openid profile api"
                }
            }
        ],
        "mongoUri": "${MONGODB_URI}",
        "mongoDb": "${MONGODB_NAME}",
        "mongoSession": {
            "enabled": ${MONGO_SESSION_ENABLED},
            "collection": "depotStoreUserSessions"
        }
    },
    "artifactRepositoryProviderConfiguration": {
        "org.finos.legend.depot.artifacts.repository.maven.MavenArtifactRepositoryConfiguration": {
            "settingsLocation": "/config/maven-settings.xml"
        }
    },
    "artifactsRetentionPolicyConfiguration": {
        "maximumSnapshotsAllowed": 5,
        "ttlForVersionsInDays": 365,
        "ttlForSnapshotsInDays": 30
    },
    "artifactsRefreshPolicyConfiguration": {
        "versionsUpdateIntervalInMillis": 3600000,
        "includeProjectPropertiesConfiguration": {
            "properties": []
        }
    },
    "projects": {
        "defaultBranch": "master"
    },
    "storages": [
        {
            "org.finos.legend.depot.store.mongo.core.MongoConfiguration": {
                "url": "${MONGODB_URI}",
                "database": "${MONGODB_NAME}"
            }
        }
    ],
    "openTracing": {
        "serviceName": "legend depot store",
        "samplerConfiguration": {
            "type": "const",
            "param": 1
        },
        "reporterConfiguration": {
            "logSpans": true
        }
    },
    "logging": {
        "level": "INFO",
        "loggers": {
            "root": {"level": "INFO"},
            "org.pac4j": {"level": "INFO"}
        },
        "appenders": [
            {
                "type": "console",
                "threshold": "INFO",
                "target": "stdout"
            }
        ]
    }
}